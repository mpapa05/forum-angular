<form [formGroup]="profileForm" (ngSubmit)="updateProfile()" *ngIf="profileForm">
    <mat-form-field>
      <mat-label>Name</mat-label>
      <input matInput formControlName="name" type="text" />
      <mat-error *ngIf="profileForm.get('name')?.invalid && (profileForm.get('name')?.touched || profileForm.get('name')?.dirty)">
        Name must be at least 5 characters.
      </mat-error>
    </mat-form-field>
  
    <mat-form-field>
      <mat-label>Email</mat-label>
      <input matInput formControlName="email" type="email" />
      <mat-error *ngIf="profileForm.get('email')?.invalid && (profileForm.get('email')?.touched || profileForm.get('email')?.dirty)">
        Invalid email format.
      </mat-error>
    </mat-form-field>
  
    <mat-form-field>
      <mat-label>New Password</mat-label>
      <input matInput 
             formControlName="newPassword" 
             [type]="showPassword1 ? 'text' : 'password'" 
             aria-label="New password" />
      <button mat-icon-button 
              type="button" 
              (click)="togglePasswordVisibility()" 
              aria-label="Toggle password visibility">
        <mat-icon>{{ showPassword1 ? 'visibility_off' : 'visibility' }}</mat-icon>
      </button>
      <mat-error *ngIf="profileForm.get('newPassword')?.invalid &&  profileForm.get('newPassword')?.dirty">
        Password must be at least 8 characters, with at least one uppercase letter, one lowercase letter, and one digit.
      </mat-error>
    </mat-form-field>
  
    <mat-form-field>
      <mat-label>Confirm Password</mat-label>
      <input matInput 
             formControlName="confirmPassword" 
             [type]="showPassword2 ? 'text' : 'password'" 
             aria-label="Confirm password" />
        <button mat-icon-button 
              type="button" 
              (click)="togglePasswordVisibility2()" 
              aria-label="Toggle password visibility">
            <mat-icon>{{ showPassword2 ? 'visibility_off' : 'visibility' }}</mat-icon>
        </button>
      <mat-error *ngIf="profileForm.get('confirmPassword')?.invalid && profileForm.get('confirmPassword')?.dirty">
        Passwords must match.
      </mat-error>
    </mat-form-field>
  
    <button mat-raised-button 
            color="primary" 
            type="submit" 
            [disabled]="profileForm.invalid">
      Update Profile
    </button>
  </form>